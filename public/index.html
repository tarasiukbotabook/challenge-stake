<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Challenge Stake</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <!-- Loading Screen -->
  <div id="loading-screen" class="loading-screen">
    <div class="loading-spinner"></div>
    <div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  </div>

  <!-- Toast Container -->
  <div id="toast-container" class="toast-container"></div>
  
  <div id="app" style="display: none;">
    <!-- Main Screen -->
    <div id="main-screen" class="screen active">
      <div class="header">
        <div class="user-avatar" id="user-avatar">
          üéØ
        </div>
        <div class="header-info">
          <h1 id="user-name">Challenge Stake</h1>
          <p id="user-greeting">–î–æ—Å—Ç–∏–≥–∞–π —Ü–µ–ª–µ–π –ø—É–±–ª–∏—á–Ω–æ</p>
        </div>
        <div class="header-balance">
          <div class="balance-amount" id="user-balance">0‚ÇΩ</div>
          <button class="btn-icon" onclick="showAddBalance()">üí≥</button>
        </div>
      </div>

      <div class="container">
        <!-- Compact Stats (Instagram style) -->
        <div class="stats-compact">
          <div class="stat-item">
            <div class="stat-number" id="stat-total">0</div>
            <div class="stat-text">–í—Å–µ–≥–æ</div>
          </div>
          <div class="stat-divider"></div>
          <div class="stat-item">
            <div class="stat-number" id="stat-completed">0</div>
            <div class="stat-text">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
          </div>
          <div class="stat-divider"></div>
          <div class="stat-item">
            <div class="stat-number" id="stat-active">0</div>
            <div class="stat-text">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
          </div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
          <button class="tab-btn active" onclick="showChallenges('my')">
            –ú–æ–∏ —á–µ–ª–ª–µ–Ω–¥–∂–∏
          </button>
          <button class="tab-btn" onclick="showChallenges('all')">
            –í—Å–µ —á–µ–ª–ª–µ–Ω–¥–∂–∏
          </button>
        </div>

        <!-- Challenges List -->
        <div id="challenges-list"></div>
      </div>
    </div>

    <!-- Feed Screen -->
    <div id="feed-screen" class="screen">
      <div class="header">
        <h1>–õ–µ–Ω—Ç–∞</h1>
      </div>
      <div class="container">
        <div class="empty-state">
          <div class="empty-icon">üì±</div>
          <div class="empty-text">–õ–µ–Ω—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π</div>
          <p style="opacity: 0.6; margin-top: 8px;">–ó–¥–µ—Å—å –±—É–¥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
        </div>
      </div>
    </div>

    <!-- Settings Screen -->
    <div id="settings-screen" class="screen">
      <div class="header">
        <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
      </div>
      <div class="container">
        <div class="settings-list">
          <div class="settings-item">
            <span>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
            <span>–í–∫–ª</span>
          </div>
          <div class="settings-item">
            <span>üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞</span>
            <span>–í–∫–ª</span>
          </div>
          <div class="settings-item">
            <span>üåê –Ø–∑—ã–∫</span>
            <span>–†—É—Å—Å–∫–∏–π</span>
          </div>
          <div class="settings-item">
            <span>‚ÑπÔ∏è –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</span>
            <span>v1.0</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
      <button class="nav-btn active" onclick="switchScreen('main')">
        <span class="nav-icon">üè†</span>
        <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
      </button>
      <button class="nav-btn" onclick="switchScreen('feed')">
        <span class="nav-icon">üì±</span>
        <span class="nav-label">–õ–µ–Ω—Ç–∞</span>
      </button>
      <button class="nav-btn nav-btn-fab" onclick="showCreateChallenge()">
        <span class="nav-icon-fab">‚ûï</span>
      </button>
      <button class="nav-btn" onclick="switchScreen('settings')">
        <span class="nav-icon">‚öôÔ∏è</span>
        <span class="nav-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
      </button>
    </div>
  </div>

    <!-- Create Challenge Modal -->
    <div id="create-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">–ù–æ–≤—ã–π —á–µ–ª–ª–µ–Ω–¥–∂</h2>
          <button class="close" onclick="closeModal('create-modal')">‚úï</button>
        </div>
        
        <form id="create-challenge-form">
          <div class="form-group">
            <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–∏</label>
            <input type="text" class="form-input" id="challenge-title" placeholder="–ü—Ä–æ–±–µ–∂–∞—Ç—å 50–∫–º –∑–∞ –º–µ—Å—è—Ü" required>
          </div>

          <div class="form-group">
            <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
            <textarea class="form-textarea" id="challenge-description" placeholder="–ß—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?"></textarea>
          </div>

          <div class="form-group">
            <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
            <select class="form-select" id="challenge-category">
              <option value="health">üèÉ –ó–¥–æ—Ä–æ–≤—å–µ –∏ —Å–ø–æ—Ä—Ç</option>
              <option value="learning">üìö –û–±—É—á–µ–Ω–∏–µ</option>
              <option value="business">üíº –ë–∏–∑–Ω–µ—Å</option>
              <option value="habits">üéØ –ü—Ä–∏–≤—ã—á–∫–∏</option>
              <option value="creative">üé® –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ</option>
              <option value="other">üìå –î—Ä—É–≥–æ–µ</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">–°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏ (‚ÇΩ)</label>
            <input type="number" class="form-input" id="challenge-stake" placeholder="1000" min="100" required>
          </div>

          <div class="form-group">
            <label class="form-label">–î–µ–¥–ª–∞–π–Ω</label>
            <input type="date" class="form-input" id="challenge-deadline" required>
          </div>

          <div class="info-box">
            üí° –ï—Å–ª–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Ü–µ–ª—å –¥–æ –¥–µ–¥–ª–∞–π–Ω–∞, –¥–µ–Ω—å–≥–∏ —É–π–¥—É—Ç –Ω–∞ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
          </div>

          <button type="submit" class="btn btn-primary btn-block">
            –°–æ–∑–¥–∞—Ç—å –∏ –∑–∞–º–æ—Ä–æ–∑–∏—Ç—å —Å—Ç–∞–≤–∫—É
          </button>
        </form>
      </div>
    </div>

    <!-- Add Balance Modal -->
    <div id="balance-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</h2>
          <button class="close" onclick="closeModal('balance-modal')">‚úï</button>
        </div>
        
        <form id="add-balance-form">
          <div class="form-group">
            <label class="form-label">–°—É–º–º–∞ (‚ÇΩ)</label>
            <input type="number" class="form-input" id="balance-amount" placeholder="1000" min="100" required>
          </div>

          <div class="info-box">
            üí≥ –í —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π
          </div>

          <button type="submit" class="btn btn-primary btn-block">
            –ü–æ–ø–æ–ª–Ω–∏—Ç—å
          </button>
        </form>
      </div>
    </div>

    <!-- Progress Modal -->
    <div id="progress-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</h2>
          <button class="close" onclick="closeModal('progress-modal')">‚úï</button>
        </div>
        
        <form id="add-progress-form">
          <div class="form-group">
            <label class="form-label">–û–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å</label>
            <textarea class="form-textarea" id="progress-content" placeholder="–°–µ–≥–æ–¥–Ω—è –ø—Ä–æ–±–µ–∂–∞–ª 5–∫–º!" required></textarea>
          </div>

          <div class="form-group">
            <label class="form-label">–°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ—Å—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
            <input type="url" class="form-input" id="progress-social" placeholder="https://t.me/...">
          </div>

          <div class="info-box">
            üì± –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –≤ Telegram –¥–ª—è –≤–∏—Ä–∞–ª—å–Ω–æ—Å—Ç–∏!
          </div>

          <button type="submit" class="btn btn-primary btn-block">
            –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
          </button>
        </form>
      </div>
    </div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
